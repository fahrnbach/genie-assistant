(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.GenieAssistant={}))})(this,function(i){"use strict";function n(s){for(let t=0;t<20;t++){const e=document.createElement("div");e.className="sparkle",e.style.left=`${Math.random()*100}%`,e.style.top=`${Math.random()*100}%`,s.appendChild(e),setTimeout(()=>e.remove(),1e3)}}function a(s){s.classList.add("glow"),console.log("hi")}class o{constructor({target:t="body",apiBaseUrl:e="/api"}={}){this.target=document.querySelector(t),this.apiBaseUrl=e,this.renderUI()}renderUI(){this.container=document.createElement("div"),this.container.id="genie-chat",this.target.appendChild(this.container),this.chatBox=document.createElement("div"),this.chatBox.classList.add("chat-box"),this.container.appendChild(this.chatBox),this.inputField=document.createElement("input"),this.inputField.type="text",this.inputField.placeholder="Speak your wish...",this.container.appendChild(this.inputField),this.responseBox=document.createElement("div"),this.responseBox.classList.add("response-box"),this.container.appendChild(this.responseBox),n(this.container),a(this.container),this.inputField.addEventListener("keydown",t=>{if(t.key==="Enter"){const e=this.inputField.value.trim();if(!e)return;this.handleInput(e)}})}async handleInput(t){if(!await this.verifyRiddle(t)){this.responseBox.innerHTML="üßû‚Äç‚ôÇÔ∏è Hmm... that answer doesn't seem quite right. Try again!";return}const r=await this.ask(t);this.renderResponse(r)}async verifyRiddle(t){try{return(await(await fetch(`${this.apiBaseUrl}/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({answer:t})})).json()).correct}catch(e){return console.error("Verification error:",e),!1}}async ask(t){try{return(await(await fetch(`${this.apiBaseUrl}/ask`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:t})})).json()).reply}catch(e){return console.error("Ask error:",e),"üßû‚Äç‚ôÇÔ∏è Sorry, I couldn't understand that wish. Try again?"}}renderResponse(t){this.responseBox.innerHTML=t}}i.GenieAssistant=o,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
